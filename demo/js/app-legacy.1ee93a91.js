(function(){"use strict";var e={6753:function(e,n,t){t(6992),t(8674),t(9601),t(7727);var r=t(7244),s=(t(5938),t(9963)),a=(t(8309),t(6252)),i=t(3577),o={class:"sidebar"},l={class:"view"},u={class:"app-version"},d=(0,a.Uk)(" Powered by "),c=["href"];function f(e,n,t,r,s,f){var h=(0,a.up)("Header"),p=(0,a.up)("Column"),g=(0,a.up)("TreeTable"),v=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(h,{title:f.title,links:f.links,version:f.version},null,8,["title","links","version"]),(0,a._)("div",o,[(0,a.Wm)(g,{class:"p-treetable-sm",value:s.sharedState.nodes,expandedKeys:s.expandedKeys,scrollable:!0,scrollHeight:"calc(100vh - 58px)",selectionKeys:s.selectionKeys,"onUpdate:selectionKeys":n[0]||(n[0]=function(e){return s.selectionKeys=e}),selectionMode:"single",onNodeSelect:f.onNodeSelect},{default:(0,a.w5)((function(){return[(0,a.Wm)(p,{field:"name",header:"Name",expander:!0,headerClass:"sidebar-name-header",bodyClass:"sidebar-name-body"}),(0,a.Wm)(p,{field:"addr",header:"Address",headerClass:"sidebar-addr-header",bodyClass:"sidebar-addr-body"})]})),_:1},8,["value","expandedKeys","selectionKeys","onNodeSelect"])]),(0,a._)("div",l,[(0,a.Wm)(v)]),(0,a._)("div",u,[d,(0,a._)("a",{href:s.appInfo.url},(0,i.zw)(s.appInfo.name)+" v"+(0,i.zw)(s.appInfo.version),9,c)])],64)}var h=t(8733),p=(t(6699),t(2023),t(4916),t(5306),t(1249),t(9720),t(5151)),g=(t(1539),t(1532),t(8783),t(3948),t(2262)),v=(t(9714),{hex:function(e){return"0x"+e.toString(16)},field_value:function(e,n){return 1==e.nbits?n:this.hex(n)}}),m={sharedState:(0,g.qj)({data:null,fields:null,nodes:null}),loaded:!1,load:function(e){var n=this;return fetch(e).then((function(e){return e.json()})).then((function(e){n.sharedState.data=e,n.sharedState.fields=n.get_field_map(e.elements),n.sharedState.nodes=n.get_nodes(e.elements,e.root),n.loaded=!0}))},untilLoaded:function(e){function n(t){e.loaded?t():setTimeout((function(e){return n(t)}),1e3)}return new Promise(n)},get_field_map:function(e){var n=new Map;for(var t in e){var r=e[t];if(r.fields){var s,a=(0,p.Z)(r.fields);try{for(a.s();!(s=a.n()).done;){var i=s.value,o=t+"."+i.name;n.set(o,t)}}catch(l){a.e(l)}finally{a.f()}}}return n},get_nodes:function(e,n){var t=this;return n.children.map((function(n){var r=e[n],s={key:r["id"],styleClass:r["id"],data:{name:r["name"],addr:v.hex(r["addr"])}};return"children"in r&&(s["children"]=t.get_nodes(e,r)),s}))},first_reg:function(){for(var e in this.sharedState.data.elements)if("reg"==this.sharedState.data.elements[e].type)return e}},_=JSON.parse('{"u2":"regvue","i8":"0.2.0","Xh":"https://github.com/rfdonnelly/regvue"}'),b={created:function(){var e=this;this.reg={},m.load("data.json"),this.$watch((function(){return e.$route.params}),(function(n,t){n.regid&&m.untilLoaded(m).then((function(t){e.selectElement(n.regid)}))}))},data:function(){return{appInfo:{name:_.u2,url:_.Xh,version:_.i8},reg:null,sharedState:m.sharedState,expandedKeys:{},selectionKeys:{}}},methods:{onNodeSelect:function(e){this.$router.push({name:"reg",params:{regid:e.key}})},selectElement:function(e){this.reg=this.sharedState.data.elements[e],this.selectionKeys={},this.selectionKeys[e]=!0;var n=e;while(n.includes("."))n=n.replace(/\.\w+$/,""),this.expandedKeys[n]=!0;var t=document.getElementsByClassName(e);if(t.length){var r=t[0];r.scrollIntoView({block:"center"})}}},computed:{title:function(){var e,n;return(null===(e=this.sharedState.data)||void 0===e||null===(n=e.root)||void 0===n?void 0:n.display_name)||"display_name undefined"},links:function(){var e,n,t=null===(e=this.sharedState.data)||void 0===e||null===(n=e.root)||void 0===n?void 0:n.links;return t?Object.entries(t).map((function(e){var n=(0,h.Z)(e,2),t=n[0],r=n[1],s={href:r,text:t};return s})):{}},version:function(){var e,n;return(null===(e=this.sharedState.data)||void 0===e||null===(n=e.root)||void 0===n?void 0:n.version)||"version undefined"}},name:"App"},y=t(3744);const w=(0,y.Z)(b,[["render",f]]);var k=w,x=t(2119);function S(e,n,t,r,s,i){return(0,a.wg)(),(0,a.iD)("span")}var C={data:function(){return{}},created:function(){var e=this;m.untilLoaded(m).then((function(n){e.$router.push({name:"reg",params:{regid:m.first_reg()}})}))}};const D=(0,y.Z)(C,[["render",S]]);var I=D,K={key:0},M={id:"doc"},O=["innerHTML"];function L(e,n,t,r,s,i){var o=(0,a.up)("RegLayout"),l=(0,a.up)("RegFields");return i.reg?((0,a.wg)(),(0,a.iD)("div",K,[(0,a.Wm)(o,{reg:i.reg,field_name:t.field_name},null,8,["reg","field_name"]),(0,a._)("div",M,[(0,a._)("span",{innerHTML:i.doc},null,8,O)]),(0,a.Wm)(l,{reg:i.reg,field_name:t.field_name},null,8,["reg","field_name"])])):(0,a.kq)("",!0)}t(8757);var H={data:function(){return{sharedState:m.sharedState}},props:["regid","field_name"],computed:{reg:function(){return this.sharedState.data?this.sharedState.data.elements[this.regid]:{}},doc:function(){return this.reg.doc?this.reg.doc.replaceAll("\n","<br>"):""}}};const Z=(0,y.Z)(H,[["render",L],["__scopeId","data-v-7dddb035"]]);var j=Z,T=[{name:"default",path:"/",component:I},{name:"reg",path:"/reg/:regid",component:j,props:!0},{name:"field",path:"/reg/:regid/field/:field_name",component:j,props:!0}],z=(0,x.p7)({history:(0,x.r5)(),routes:T}),q={class:"p-3 mb-3 border-bottom"},W={class:"container"},Y={class:"navbar fixed-top navbar-light bg-light py-0"},N={class:"container-fluid"},R={class:"modal",id:"version-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},V={class:"modal-dialog"},$={class:"modal-content"},A=(0,a._)("div",{class:"modal-header"},[(0,a._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Version"),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),B={class:"modal-body"},E=(0,a._)("div",{class:"modal-footer"},[(0,a._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"},"Close")],-1),F={class:"col-3 mb-3 mb-lg-0 mx-auto"},P={key:0,class:"nav mb-2 justify-content-center mb-md-0"},U=["href"];function X(e,n,t,r,s,o){var l=(0,a.up)("Search");return(0,a.wg)(),(0,a.iD)("header",q,[(0,a._)("div",W,[(0,a._)("nav",Y,[(0,a._)("div",N,[(0,a._)("span",{class:"navbar-brand mb-0 ml-2 h1",onClick:n[0]||(n[0]=function(){return o.showVersion&&o.showVersion.apply(o,arguments)})},(0,i.zw)(t.title),1),(0,a._)("div",R,[(0,a._)("div",V,[(0,a._)("div",$,[A,(0,a._)("div",B,(0,i.zw)(t.version),1),E])])]),(0,a._)("form",F,[(0,a.Wm)(l)]),t.links?((0,a.wg)(),(0,a.iD)("ul",P,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.links,(function(e){return(0,a.wg)(),(0,a.iD)("li",{key:e},[(0,a._)("a",{href:e.href,class:"nav-link px-2 link-secondary"},(0,i.zw)(e.text),9,U)])})),128))])):(0,a.kq)("",!0)])])])])}var J={data:function(){return{}},props:["title","links","version"],methods:{showVersion:function(){var e=document.getElementById("version-modal");document.body.appendChild(e);var n=new r.u_(e,{});n.show()}}};const Q=(0,y.Z)(J,[["render",X]]);var G=Q,ee={class:"search-box"},ne=["value"],te={key:0},re=(0,a._)("div",{class:"suggestion-section-heading"},"Registers",-1),se=["onMousedown","onMouseenter"],ae=["href"],ie={class:"page-title"},oe={key:1},le=(0,a._)("div",{class:"suggestion-section-heading"},"Fields",-1),ue=["onMousedown","onMouseenter"],de=["href"],ce={class:"page-title"};function fe(e,n,t,r,o,l){var u=this;return(0,a.wg)(),(0,a.iD)("div",ee,[(0,a._)("input",{type:"search",class:"form-control","aria-label":"Search",placeholder:"Search",value:o.query,autocomplete:"off",spellcheck:"false",onInput:n[0]||(n[0]=function(e){return o.query=e.target.value}),onFocus:n[1]||(n[1]=function(e){return o.focused=!0}),onKeyup:n[2]||(n[2]=(0,s.D2)((function(e){return l.go(o.focusIndex)}),["enter"]))},null,40,ne),l.showSuggestions?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"suggestions",onMouseleave:n[5]||(n[5]=function(){return l.unfocus&&l.unfocus.apply(l,arguments)})},[l.suggestions.regs.length>0?((0,a.wg)(),(0,a.iD)("section",te,[re,(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.suggestions.regs,(function(e,t){return(0,a.wg)(),(0,a.iD)("li",{key:t,class:(0,i.C_)(["suggestion",{focused:t===o.focusIndex}]),onMousedown:function(e){return l.go(t)},onMouseenter:function(e){return l.focus(t)}},[(0,a._)("a",{href:u.$router.resolve(e.path).href,onClick:n[3]||(n[3]=(0,s.iM)((function(){}),["prevent"]))},[(0,a._)("span",ie,(0,i.zw)(e.name),1)],8,ae)],42,se)})),128))])])):(0,a.kq)("",!0),l.suggestions.fields.length>0?((0,a.wg)(),(0,a.iD)("section",oe,[le,(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.suggestions.fields,(function(e,t){return(0,a.wg)(),(0,a.iD)("li",{key:t+l.suggestions.regs.length,class:(0,i.C_)(["suggestion",{focused:t+l.suggestions.regs.length===o.focusIndex}]),onMousedown:function(e){return l.go(t+l.suggestions.regs.length)},onMouseenter:function(e){return l.focus(t+l.suggestions.regs.length)}},[(0,a._)("a",{href:u.$router.resolve(e.path).href,onClick:n[4]||(n[4]=(0,s.iM)((function(){}),["prevent"]))},[(0,a._)("span",ce,(0,i.zw)(e.name),1)],8,de)],42,ue)})),128))])])):(0,a.kq)("",!0)],32)):(0,a.kq)("",!0)])}t(3210);var he={data:function(){return{sharedState:m.sharedState,query:"",focused:!1,focusIndex:0}},methods:{go:function(e){if(this.showSuggestions){var n=this.suggestions.all[e].path;this.$router.push(n),this.query="",this.focusIndex=0}},focus:function(e){this.focusIndex=e},unfocus:function(){this.focusIndex=-1}},computed:{showSuggestions:function(){return this.focused&&this.suggestions&&this.suggestions.all.length},suggestions:function(){var e=this.query.trim().toLowerCase();if(e){var n={regs:[],fields:[],all:[]};for(var t in this.sharedState.data.elements){var r=this.sharedState.data.elements[t];if("reg"==r.type&&r.name.toLowerCase().includes(e)){var s={name:"reg",params:{regid:t}},a={type:"Register",name:t,path:s};n.regs.push(a),n.all.push(a)}}var i,o=(0,p.Z)(this.sharedState.fields);try{for(o.s();!(i=o.n()).done;){var l=(0,h.Z)(i.value,2),u=l[0],d=l[1],c=u.replace(/.*\./,"");if(c.toLowerCase().includes(e)){var f={name:"field",params:{regid:d,field_name:c}},g={type:"Field",name:u,path:f};n.fields.push(g),n.all.push(g)}}}catch(v){o.e(v)}finally{o.f()}return n}}}};const pe=(0,y.Z)(he,[["render",fe]]);var ge=pe,ve=(t(6755),t(7042),{num:function(e){var n=this.base(e.trim()),t=n.str,r=n.base;return parseInt(t.replaceAll("_",""),r)},base:function(e){var n=e.toLowerCase();return n.startsWith("0x")?{str:n.slice(2),base:16}:n.startsWith("0b")?{str:n.slice(2),base:2}:{str:n,base:10}}}),me=function(e){return(0,a.dD)("data-v-f90b8032"),e=e(),(0,a.Cn)(),e},_e={id:"reg-layout-table"},be=["colspan"],ye=["colspan"],we=["value"],ke={colspan:"32"},xe={class:"field-checkbox"},Se=me((function(){return(0,a._)("label",{for:"byte_swap"},"Byte swap",-1)})),Ce=document.createElement("canvas"),De=function(e,n){var t=Ce.getContext("2d");return t.font=n,t.measureText(e).width},Ie={mounted:function(e){var n=new ResizeObserver((function(e){var n=e[0],t=n.contentRect.width,r=n.target,s=r.textContent,a=window.getComputedStyle(r).font,i=De(s,a);i>t?r.classList.add("rotate"):r.classList.remove("rotate")}));n.observe(e)}},Ke={directives:{"responsive-rotate":Ie},data:function(){return{byte_swap:!1}},methods:{field_value:function(e){return v.field_value(e,e.reset)},swap_bytes:function(e){for(var n=0,t=0;t<4;t++){var r=8*t,s=e>>r&255,a=8*(3-t),i=s<<a;n|=i}return n},update_fields:function(e){var n=ve.num(e.target.value);this.byte_swap&&(n=this.swap_bytes(n));var t,r=(0,p.Z)(this.reg.fields);try{for(r.s();!(t=r.n()).done;){var s=t.value,a=(1n<<BigInt(s.nbits))-1n,i=BigInt(n>>s.lsb)&a;s.reset=i}}catch(o){r.e(o)}finally{r.f()}}},computed:{}},Me=Object.assign(Ke,{props:["reg","field_name"],setup:function(e){return function(n,t){var r=(0,a.up)("Checkbox"),s=(0,a.Q2)("responsive-rotate");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("table",_e,[(0,a._)("thead",null,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(32,(function(e){return(0,a._)("th",{class:"layout_bit_index",key:e},(0,i.zw)(32-e),1)})),64))]),(0,a._)("tbody",null,[(0,a._)("tr",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.reg.fields,(function(n){return(0,a.wy)(((0,a.wg)(),(0,a.iD)("td",{class:(0,i.C_)(["layout_field_name",{highlight:e.field_name==n.name}]),key:n,colspan:n.nbits},[(0,a.Uk)((0,i.zw)(n.name),1)],10,be)),[[s]])})),128))]),(0,a._)("tr",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.reg.fields,(function(t){return(0,a.wg)(),(0,a.iD)("td",{class:(0,i.C_)(["layout_field_input",{highlight:e.field_name==t.name}]),key:t,colspan:t.nbits},[(0,a._)("input",{type:"text",value:n.field_value(t)},null,8,we)],10,ye)})),128))]),(0,a._)("tr",null,[(0,a._)("td",ke,[(0,a._)("input",{type:"text",onInput:t[0]||(t[0]=function(){return n.update_fields&&n.update_fields.apply(n,arguments)})},null,32)])])])]),(0,a._)("div",xe,[(0,a.Wm)(r,{id:"byte_swap",modelValue:n.byte_swap,"onUpdate:modelValue":t[1]||(t[1]=function(e){return(0,g.dq)(byte_swap)?byte_swap.value=e:null}),binary:!0},null,8,["modelValue"]),Se])],64)}}});const Oe=(0,y.Z)(Me,[["__scopeId","data-v-f90b8032"]]);var Le=Oe,He=function(e){return(0,a.dD)("data-v-188ed152"),e=e(),(0,a.Cn)(),e},Ze=He((function(){return(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Bits"),(0,a._)("th",null,"Name"),(0,a._)("th",null,"Access"),(0,a._)("th",null,"Description")])],-1)})),je={class:"fields_bits"},Te={class:"fields_name"},ze={class:"fields_access"},qe={class:"fields_description"},We=["innerHTML"],Ye={data:function(){return{}},methods:{bits:function(e,n){return 1==n?e:n+e-1+":"+e}},computed:{}},Ne=Object.assign(Ye,{props:["reg","field_name"],setup:function(e){return function(n,t){return(0,a.wg)(),(0,a.iD)("table",null,[Ze,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.reg.fields,(function(t){var r;return(0,a.wg)(),(0,a.iD)("tr",{key:t,class:(0,i.C_)({highlight:e.field_name==t.name})},[(0,a._)("td",je,(0,i.zw)(n.bits(t.lsb,t.nbits)),1),(0,a._)("td",Te,(0,i.zw)(t.name),1),(0,a._)("td",ze,(0,i.zw)(t.access),1),(0,a._)("td",qe,[(0,a._)("span",{innerHTML:null===(r=t.doc)||void 0===r?void 0:r.replaceAll("\n","<br>")},null,8,We)])],2)})),128))])])}}});const Re=(0,y.Z)(Ne,[["__scopeId","data-v-188ed152"]]);var Ve=Re,$e=t(5475),Ae=t(7025),Be=t(5247),Ee=t(5876);(0,s.ri)(k).use($e.Z).use(z).component("Header",G).component("Search",ge).component("RegLayout",Le).component("RegFields",Ve).component("TreeTable",Ae.Z).component("Column",Be.Z).component("Checkbox",Ee.Z).mount("#app")}},n={};function t(r){var s=n[r];if(void 0!==s)return s.exports;var a=n[r]={exports:{}};return e[r](a,a.exports,t),a.exports}t.m=e,function(){var e=[];t.O=function(n,r,s,a){if(!r){var i=1/0;for(d=0;d<e.length;d++){r=e[d][0],s=e[d][1],a=e[d][2];for(var o=!0,l=0;l<r.length;l++)(!1&a||i>=a)&&Object.keys(t.O).every((function(e){return t.O[e](r[l])}))?r.splice(l--,1):(o=!1,a<i&&(i=a));if(o){e.splice(d--,1);var u=s();void 0!==u&&(n=u)}}return n}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,s,a]}}(),function(){t.d=function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,r){var s,a,i=r[0],o=r[1],l=r[2],u=0;if(i.some((function(n){return 0!==e[n]}))){for(s in o)t.o(o,s)&&(t.m[s]=o[s]);if(l)var d=l(t)}for(n&&n(r);u<i.length;u++)a=i[u],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(d)},r=self["webpackChunkregvue"]=self["webpackChunkregvue"]||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))}();var r=t.O(void 0,[998],(function(){return t(6753)}));r=t.O(r)})();
//# sourceMappingURL=app-legacy.1ee93a91.js.map